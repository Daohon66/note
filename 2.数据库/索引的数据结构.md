**索引是一种用于快速查询和检索数据的数据结构。常见的索引结构有：B树、B+树和Hash。**

索引的作用相当于目录。

**索引的优缺点**

**优点：**

- 使用可以大大加快数据的检索速度，这也是创建索引的最主要原因
- 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性

**缺点：**

- 创建索引和维护索引需要耗费非常多的时间。当对表中的数据进行增删改时，如果数据加了索引，那么索引也要动态修改，会降低SQL执行效率
- 索引需要使用物理文件存储，也会消耗一定的空间

**如果数据库的数据量不大，索引也不一定能够带来很大的性能提升**

**索引的底层数据结构**

**Hash & B+树**

Hash索引指的就是Hash表，最大的优点就是能够在很短的时间内，根据Hash函数定位到数据所在的位置，时间复杂度可以接近O(1)。

但是使用Hash索引会带来俩个问题

- Hash冲突
- Hash索引不支持顺序和范围查询：假如我们要对表中的数据进行排序或者进行范围查询，Hash索引就不太行了，Hash索引进行范围查询需要根据hash算法进行定位，每个数据都要进行hash计算然后定位无疑会消耗大量的性能

**B树 & B+树**

B树也称B-树，全称为多路平衡树，B+树是B树的一种变体。B树和B+树中的B是Balanced平衡的意思。

**俩者的异同**

- B树的所有节点即存放键key也存放值data，而B+树只有叶子节点存放key和data，其他内节点只存放key
- B树的叶子节点都是相对独立的；而B+树的叶子结点有一条引用链指向与它相邻的叶子节点。
- B树的检索过程相当于对范围内的每个节点的关键字做二分查找，有可能还没有到达叶子节点，检索就结束了。而B+树的检索效率就很稳定，如何查找都是从根节点到叶子节点的过程，叶子节点的顺序检索很明显。

**索引类型**

- **主键索引**

数据表的主键列使用的就是主键索引。

一个数据表有只能有一个主键，并且主键不能为null，不能重复。

- **二级索引**

二级索引又称为辅助索引，是因为二级索引的叶子节点存储的数据是主键。也就是说，通过	 

二级索引可以定位主键的位置。

**1.**唯一索引(Unique Key) ：唯一索引也是一种约束。唯一索引的属性列不能出现重复的数据，但是允许数据为 NULL，一张表允许创建多个唯一索引。 建立唯一索引的目的大部分时候都是为了该属性列的数据的唯一性，而不是为了查询效率。

**2.**普通索引(Index) ：普通索引的唯一作用就是为了快速查询数据，一张表允许创建多个普通索引，并允许数据重复和 NULL。

**3.**前缀索引(Prefix) ：前缀索引只适用于字符串类型的数据。前缀索引是对文本的前几个字符创建索引，相比普通索引建立的数据更小， 因为只取前几个字符。

**4.**全文索引(Full Text) ：全文索引主要是为了检索大文本数据中的关键字的信息，是目前搜索引擎数据库使用的一种技术。Mysql5.6 之前只有 MYISAM 引擎支持全文索引，5.6 之后 InnoDB 也支持了全文索引。        

**聚集索引和非聚集索引**

- **聚集索引**

聚集索引就是将索引结构和数据一起存放的索引。主键索引属于聚集索引。

**优点：**聚集索引的查询速度非常快，因为整个 B+树本身就是一颗多叉平衡树，叶子节点也

都是有序的，定位到索引的节点，就相当于定位到了数据。

**缺点：**1.依赖有序的数据，如果索引的数据无序，就需要在插入时进行排序，整型还好，如

果是类似字符串或UUID这样的数据，插入或查找的速度就比较慢了

：2.更新代价大，如果对索引列的数据被修改时，那么对应的索引也将会被修改， 而且

况聚集索引的叶子节点还存放着数据，修改代价肯定是较大的， 所以对于主键索引

来说，主键一般都是不可被修改的。

- **非聚集索引**

非聚集索引即索引结构和数据分开存放的索引。二级索引就属于非聚集索引。

**优点：**更新代价比聚集索引小。因为它的叶子节点不存放数据。

**缺点：**1.和聚集索引一样，都依赖于有序的数据

：2.可能会二次查询（回表）：当查找索引对应的指针或主键后，可能还需要根据指针

或主键再到数据文件或表中查询

**覆盖索引**

如果一个索引包含所有需要查询的字段的值，我们就称为“覆盖索引”。在InnoDB存储引擎中，如果不是主键索引，叶子节点存储的是主键+列值。最终会进行“回表”，也就是通过主键再查一次。这样的话就会比较慢，覆盖索引要做的就是把要查询出的列和索引对应，不做回表操作。

**创建索引的注意事项**

1. **选择合适的字段创建索引**

- 不为null的字段
- 被频繁查询的字段
- 被作为条件查询的字段
- 频繁需要排序的字段
- 被经常用于连接的字段

1. **被频繁更新的字段应该慎重建立索引**
2. **尽可能的考虑建立联合索引而不是单列索引**
3. **注意避免冗余索引**
4. **考虑在字符串类型的字段上使用前缀索引代替普通索引**